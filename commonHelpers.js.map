{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43050559-0509edef54e5bc117deb7e6a8';\nconst baseURL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page, perPage) {\n  try {\n    const response = await axios.get(baseURL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const galleryList = document.querySelector(\".gallery\");\n\nexport function renderImages(images) {\n  if (images.length == 0) {\n    iziToast.error({\n      message: `Sorry, there are no images matching your search query. Please, try again!`,\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n  } else {\n    const galleryMarkup = images.map((photo) => {\n        return `<li class=\"photo-list-item\">\n        <a class=\"photos-list-link\" href=\"${photo.largeImageURL}\">\n        <img class=\"photo\" src=\"${photo.webformatURL}\" alt=\"${photo.tags}\"/>\n        </a>\n        <ul class=\"container\">\n        <li class=\"item-container\"><p><span class=\"accent\">Likes</span></br>${photo.likes}</p></li>\n        <li class=\"item-container\"><p><span class=\"accent\">Views</span></br>${photo.views}</p></li>\n        <li class=\"item-container\"><p><span class=\"accent\">Comments</span></br>${photo.comments}</p></li>\n        <li class=\"item-container\"><p><span class=\"accent\">Downloads</span></br>${photo.downloads}</p></li>\n        </ul>\n        </li>`;\n    })\n        .join(\"\");\n    \n    galleryList.insertAdjacentHTML('beforeend', galleryMarkup);\n  }\n  lightbox.refresh();\n}\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\n    lightbox.refresh();\n\nexport function endMessage() {\n  iziToast.error({\n      title:\"We're sorry, but you've reached the end of search results.\",\n      message: message,\n      position: \"topRight\",\n      backgroundColor: 'lightblue',\n  });\n}\n","import { fetchImages } from './js/pixabay-api';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport {\n  renderImages,\n  galleryList,\n  endMessage,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nhideLoadMoreBtn();\nhideLoader();\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\n\nform.addEventListener('submit', submitHandle);\nasync function submitHandle(event) {\n  event.preventDefault();\n  query = input.value.trim();\n  page = 1;\n\n  galleryList.innerHTML = '';\n\n  if (query === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please fill in the field for search.',\n      position: 'topRight',\n      color: 'red'\n    });\n    hideLoadMoreBtn();\n\n    return;\n  }\n\n  hideEndMessage();\n\n  showLoader();\n  try {\n    const images = await fetchImages(query, page, perPage);\n    const totalHits = images.totalHits;\n\n    if (images.hits.length === 0) {\n      galleryList.innerHTML = '';\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        color: 'red'\n      });\n      hideLoadMoreBtn();\n      return;\n    } else {\n      renderImages(images.hits);\n      input.value = '';\n      showLoadMoreBtn();\n    }\n    if (perPage * page >= totalHits) {\n      hideLoadMoreBtn();\n      endMessage();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      backgroundColor: 'lightblue',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  try {\n    if (loadMoreBtn) {\n      page += 1;\n    }\n    const images = await fetchImages(query, page, perPage);\n    const totalHits = images.totalHits;\n\n    renderImages(images.hits);\n    showLoader();\n    if (perPage * page >= totalHits) {\n      hideLoadMoreBtn();\n      endMessage();\n    }\n\n    const galleryCardHeight =\n      galleryList.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({ top: galleryCardHeight * 2, behavior: 'smooth' });\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Error fetching more images: ${error}`,\n     position: \"topRight\",\n    });\n  } finally {\n    hideLoader();\n  }\n});\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.style.display = 'none';\n}\n\nfunction hideEndMessage() {\n  const endMessage = document.querySelector('.end-message');\n  if (endMessage) {\n    endMessage.remove();\n  }\n}\n\n"],"names":["API_KEY","baseURL","fetchImages","query","page","perPage","axios","error","galleryList","renderImages","images","iziToast","galleryMarkup","photo","lightbox","SimpleLightbox","endMessage","form","input","loader","loadMoreBtn","hideLoadMoreBtn","hideLoader","submitHandle","event","hideEndMessage","showLoader","totalHits","showLoadMoreBtn","galleryCardHeight"],"mappings":"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"}